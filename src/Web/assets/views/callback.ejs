<html lang="en">
<%- include('partials/head', {title: 'CM OAuth Helper'}) %>
<body class="bg-gray-900 text-white font-sans">
<div class="min-w-screen min-h-screen">
    <%- include('partials/title', {title: ' OAuth Helper'}) %>
    <div class="container mx-auto">
        <div class="grid">
            <div class="bg-gray-600">
                <div class="p-6 md:px-10 md:py-6">
                    <div class="text-xl mb-4">Congrats! You did the thing.</div>
                    <div class="space-y-3">
                        <div>These are the credentials ContextMod will use to act as your bot, <b><%= userName %></b></div>
                        <ul class="list-inside list-disc">
                            <li>Access Token: <b><%= accessToken %></b></li>
                            <li>Refresh Token: <b><%= refreshToken %></b></li>
                        </ul>
                        <div>Note: You can revoke ContextMod's access to this account at any time by visiting the <a href="https://www.reddit.com/prefs/apps">reddit app preferences</a> while logged in as the account and clicking the <b>revoke access</b> link under ContextMod</div>
                    </div>
                    <div class="text-xl my-4">What Do I Do Now?</div>
                    <div class="space-y-3">
                        <% if(locals.stored === true) { %>
                            <% if(locals.success === true) { %>
                                <div>Credentials were successfully persisted to the application and the bot was automatically started! You may now <a href="/">login with your normal/moderator account</a> to view the web dashboard where your bot can be monitored.</div>
                            <% } else { %>
                                <div>The bot was successfully saved to the application but it could not be started automatically. Please inform the operator so they can restart the application.</div>
                            <% } %>
                        <% } else { %>
                                <div>These credentials were <b>not automatically added</b> to an instance and will need to be <b>manually added by the operator</b>:</div>
                            <ul class="list-inside list-disc">
                                <li>If you are a <b>Moderator</b> then copy the above <b>Tokens</b> and pass them on to the Operator of this ContextMod instance.</li>
                                <li>If you are an <b>Operator</b> copy these somewhere and then restart the application providing these as either arguments, environmental variables, or in a config as described in the <a
                                            href="https://github.com/FoxxMD/context-mod/blob/master/docs/operatorConfiguration.md#defining-configuration">configuration guide</a></li>
                            </ul>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <%- include('partials/footer') %>
</div>
</body>
</html>
